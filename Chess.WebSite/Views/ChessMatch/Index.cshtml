@using Chess.Infrastructure.DTO
@model PlayerDto

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<link rel="img" asp-href-include="~/lib/chessboardjs/img/chesspieces/wikipedia/*.png" />
<link href="~/lib/chessboardjs/css/chessboard-1.0.0.css" rel="stylesheet" />
<link href="~/css/chess_game.css" rel="stylesheet"/>

<style>
    .active_move{
        background-color: brown;
    }
    .basic::before {
        content: attr(data-timer);
    }
  
  .stopwatch {
    display: inline-block;
    background-color: white;
    border: 1px solid #eee;
    padding: 5px;
    margin: 5px;
  }
  .stopwatch span {
    font-weight: bold;
    display: block;
  }
  .stopwatch a {
    padding-right: 5px;
    text-decoration: none;
  }
  .fas {
      width: 100px;
      height: 50px;
  }
</style>


<div class="row">
    <div id="layout__main" class="col-lg-9">
        <div class="border__layout_player d-flex p-2">
            <div class="border__layout_img"><img class="img img-fluid img-thumbnail"  src="~/img/default_user.svg" id="chess_opponent_avatar"></div>
            <div class="border__layout_usernameDetail">
                <span id="chess_opponent_name">Przeciwnik</span>
                <span id="chess_opponent_rating"></span>
                <img class="img-fluid">
            </div>
            <div class="ml-auto clock__component">
                <i class="far fa-clock fa-2x"></i>
                <h3 id="clock-top" class="basic stopwatch" data-timer="00:00"></h3>
            </div>
        </div>
        <div id="chessboard" style="position: relative;"></div>
    
        <div class="border__layout_player d-flex p-2">
            <div class="border__layout_img"><img src="/img/@Model.AvatarImageName" class="img img-fluid img-thumbnail" id="chess_current_user_avatar"></div>
            <div class="border__layout_usernameDetail">
                <span id="chess_current_user_name">@Model.UserName</span>
                <span id="chess_current_user_rating">(@Model.RatingElo)</span>
                <img src="https://unsplash.it/20/20" class="img-fluid">
            </div>
            <div class="ml-auto clock__component">
                <i class="far fa-clock fa-2x"></i>
                <h3 id="clock-bottom" class="basic stopwatch" data-timer="00:00"></h3>
            </div>
        </div>

    </div>
    <div id="layout__sidebar" class="col-lg-3 ">
        <div class="game__controls__component">
            <div class="row random_mod d-none p-3">
                <h4 class="text-center">Wybierz długość partii</h4>
                <select id="gameDurationDropdown" class="col-5 custom-select">
                    <option value=10>10 min</option>
                    <option value=5>5 min</option>
                    <option value=3>3 min</option>
                </select>
                <button type="button" class="btn btn-secondary col-7"  id="durationGameButton">
                    Wybierz
                </button>
            </div>


            <div class="game__controls__wrapper mb-auto">
                <div class="info">
                    <div class="alert alert-secondary">
                        Historia ruchów
                    </div>
                    <div id="move-history" class="move-history">

                    </div>
                    <div id="game-information-component">
                    </div>
                </div>
            </div>
            

            <div class="section_wrapper m-3"> 
                <div>
                    <i class="fas fa-chevron-left fa-ls fa-3x m-3 btn"></i>
                    <i class="fas fa-chevron-right fa-3x m-3 btn"></i>
                </div>
                <div>
                    <i class="fas fa-retweet fa-2x m-3"></i>
                    <i class="fas fa-download fa-2x m-3"></i>
                    <i class="fas fa-share-alt fa-2x m-3"></i>
                </div>
            </div>
        </div>
    </div>
<div id="PGN" style="padding: 50px;"></>
<p id="ChessGameId" hidden>@ViewBag.ChessGameId</p>


<div class="container ">
    <!-- Modal -->
    <div class="modal fade text-center" id="liveGameModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content ">
        <div>
            <h3 class="modal-title"></h3>
        </div>
        <div class="border-bottom  bg-success text-white">
            <h3>Zwyciężyłeś!</h3>
            <span id="liveGameModalCauseEnd">Powod<span>
        </div>
        <div class="modal-body bg-light ">
            <div class="d-inline-flex flex-row p-3 border-bottom">
                <div style="width: 100px;">
                    <img class="img img-fluid img-thumbnail" src="~/img/default_user.svg" id="liveGameModalFirstPlayerAvatar">
                    <span class="font-weight-light" id="liveGameModalFirstPlayerName"></span>
                </div>
                <div class="align-self-center p-3"><h5 id="liveGameModalResult">0-0</h5></div>
                <div style="width: 100px;">
                    <img class="img img-fluid img-thumbnail"  src="~/img/default_user.svg" id="liveGameModalSecondPlayerAvatar">
                    <span class="font-weight-light" id="liveGameModalSecondPlayerName"></span>   
                </div>
            </div>
            <h6 class="p-2 border-bottom" >
                Nowy ranking <h3 id="liveGameModalNewRating">1234</h3>
            </h6>
            <div class="p-2 border-bottom">
                <button type="button" class="btn btn-info" id="liveGameModalNextGameButton">Zagraj nowe 10 minut</button>
            </div>
        </div>
        </div>
        </div>
    </div>
    </div>
</div>




@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="~/lib/chessjs/chess.js"></script>
    <script src="~/lib/chessboardjs/js/chessboard-1.0.0.js"></script>
    <script src="~/js/signalr/dist/browser/signalr.js"></script>
    <script src="~/js/chess_game_v4.js"></script>

    <script>
        const player_rating_elo = @Model.RatingElo;
        const player_name = '@Model.UserName';
        const player_id = '@Model.PlayerId';
        const chess_mod_selected = chess_mod.LIVE_GAME;
        const chess_searching_typ_selected = chess_searching_typ.RANDOM;
        @* const chess_searching_typ_selected = chess_searching_typ.PARTICULAR; *@
    </script>
}





    